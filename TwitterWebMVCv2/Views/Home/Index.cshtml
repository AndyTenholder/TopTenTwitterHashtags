@model TwitterWebMVCv2.ViewModels.HomeViewModel
@{
    ViewData["Title"] = "Top 10 #s";
}

<h1>
    The Top 10
    @*SVG Twitter bird image*@
    <svg viewbox="0 0 2000 1625.36"
         width="43"
         height="35"
         version="1.1"
         xmlns="http://www.w3.org/2000/svg">
        <path d="m 1999.9999,192.4 c -73.58,32.64 -152.67,54.69 -235.66,64.61 84.7,-50.78 149.77,-131.19 180.41,-227.01 -79.29,47.03 -167.1,81.17 -260.57,99.57 C 1609.3399,49.82 1502.6999,0 1384.6799,0 c -226.6,0 -410.328,183.71 -410.328,410.31 0,32.16 3.628,63.48 10.625,93.51 -341.016,-17.11 -643.368,-180.47 -845.739,-428.72 -35.324,60.6 -55.5583,131.09 -55.5583,206.29 0,142.36 72.4373,267.95 182.5433,341.53 -67.262,-2.13 -130.535,-20.59 -185.8519,-51.32 -0.039,1.71 -0.039,3.42 -0.039,5.16 0,198.803 141.441,364.635 329.145,402.342 -34.426,9.375 -70.676,14.395 -108.098,14.395 -26.441,0 -52.145,-2.578 -77.203,-7.364 52.215,163.008 203.75,281.649 383.304,284.946 -140.429,110.062 -317.351,175.66 -509.5972,175.66 -33.1211,0 -65.7851,-1.949 -97.8828,-5.738 181.586,116.4176 397.27,184.359 628.988,184.359 754.732,0 1167.462,-625.238 1167.462,-1167.47 0,-17.79 -0.41,-35.48 -1.2,-53.08 80.1799,-57.86 149.7399,-130.12 204.7499,-212.41"
              style="fill:#00aced" />
    </svg>
    #Hashtags!
</h1>
<button id="getHourData">Hour</button>
<button id="getDayData">Day</button>
<button id="getWeekData">Week</button>

<table>
    <tr>
        <td>
            <ol>
                @for (int i = 0; i < 10; i++)
                {
                    <li><p>@Model.HourHashtagCounts[i].Hashtag.Name - @Model.HourHashtagCounts[i].TimesUsed</p></li>
                }
            </ol>
        </td>
    </tr>
</table>

@*Tweets Each Hour Line Graph Logic*@
@{

    List<int> hashtag0DataList = new List<int>();
    List<int> hashtag1DataList = new List<int>();

    for (int i = 0; i < 12; i++)
    {
        hashtag0DataList.Add(Model.HourHashtagCounts[0].TweetsPer[i]);
        hashtag1DataList.Add(Model.HourHashtagCounts[1].TweetsPer[i]);
    }
}
@*graphs made using the Charts.js Lib http://www.chartjs.org/*@
<canvas id="TweetsPerHourChart"></canvas>
@{
    for (int i = 0; i < 10; i++)
    {
        <button id="button @i">@Model.HourHashtagCounts[i].Hashtag.Name.ToString()</button>
    }
}


<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.1/Chart.bundle.min.js"></script>
<script>

    var button0IsOn = true;
    var button1IsOn = true;
    var button2IsOn = true;
    var button3IsOn = false;
    var button4IsOn = false;
    var button5IsOn = false;
    var button6IsOn = false;
    var button7IsOn = false;
    var button8IsOn = false;
    var button9IsOn = false;

    var MINUTES = ["5", "10", "15", "20", "25", "30", "35", "40", "45", "50", "55", "60"];
    var HOURS = ["12am", "1am", "2am", "3am", "4am", "5am", "6am", "7am", "9am", "10am", "11am", "12pm", "1pm", "2pm", "3pm", "4pm", "5pm", "6pm", "7pm", "8pm", "9pm", "10pm", "11pm"];
    var DAYS = ["1", "2", "3", "4", "5", "6", "7"];

    var TweetsPerHourChart = {
        type: 'line',
        data: {
            labels: MINUTES,
            datasets: [{
                label: '@Model.HourHashtagCounts[0].Hashtag.Name.ToString()',
                backgroundColor: "#0074D9",
                borderColor: "#0074D9",
                @*C# list must be converted to JSON object to be used by Chart.js lib*@
                data: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(hashtag0DataList)),
                fill: false
            },{
                label: '@Model.HourHashtagCounts[1].Hashtag.Name.ToString()',
                backgroundColor: "#7FDBFF",
                borderColor: "#7FDBFF",
                @*C# list must be converted to JSON object to be used by Chart.js lib*@
                data: @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(hashtag1DataList)),
                fill: false
            }]
        },
        options: {
            scales: {
                yAxes: [{
                    display: true,
                    scaleLabel: {
                        display: true,
                        labelString: "Tweets"
                    }
                }]
            },
            @*tooltips and hover cause label to appear at data point the cursor is closest to*@
            tooltips: {
                mode: 'index',
                intersect: false
            },
            hover: {
                mode: "nearest",
                intersect: true
            },
            responsive: true,
            maintainAspectRatio: true
        }
    };

    window.onload = function () {
        var ctx = document.getElementById("TweetsPerHourChart").getContext("2d");
        window.myLine = new Chart(ctx, TweetsPerHourChart);
    };

    document.getElementById('button 0').addEventListener('click', function () {
        @{ int index1 = 0;}
        if (button0IsOn) {
            var button0Array = []
            @{ index1 = 0;}
            for (var index = 0; index < TweetsPerHourChart.data.labels.length; ++index) {
                button0Array.push(@Model.HourHashtagCounts[0].TweetsPer[index1]);
                @index1++;
            }
            TweetsPerHourChart.data.datasets.splice(TweetsPerHourChart.data.datasets.indexOf(button0Array),1);
            window.myLine.update();

        } else {

            var newDataset = {
                label: "@Model.HourHashtagCounts[0].Hashtag.Name.ToString()",
                backgroundColor: '#0074D9',
                borderColor: '#0074D9',
                data: [],
                fill: false
            };
            @{ index1 = 0;}
            for (var index = 0; index < config.data.labels.length; ++index) {
                newDataset.data.push(@Model.HourHashtagCounts[0].TweetsPer[index1]);
                @index1++;
            }
            TweetsPerHourChart.data.datasets.push(newDataset);
            window.myLine.update();
        }
    });
</script>